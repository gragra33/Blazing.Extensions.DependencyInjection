<Window x:Class="WpfExample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:WpfExample.Views"
        xmlns:vm="clr-namespace:WpfExample.ViewModels"
        xmlns:converters="clr-namespace:WpfExample.Converters"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=vm:MainViewModel}"
        Title="WPF TabViewHandler Pattern with Blazing.Extensions.DependencyInjection" 
        Height="700" Width="950"
        WindowStartupLocation="CenterScreen">
    
    <Window.Resources>
        <!-- No static converter resources - converters will be created dynamically -->
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="WPF View-First MVVM with Dependency Injection"
                       FontSize="24" FontWeight="Bold"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Powered by Blazing.Extensions.DependencyInjection"
                       FontSize="14" Foreground="Gray"
                       HorizontalAlignment="Center" Margin="0,5,0,0"/>
            
            <Border Background="#FFF9E6" BorderBrush="#FFB800" BorderThickness="2" 
                    Padding="12" Margin="0,15,0,0" CornerRadius="5">
                <StackPanel>
                    <TextBlock TextWrapping="Wrap" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,5">
                        <Run>🎯 TabViewHandler Pattern:</Run>
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12">
                        <Bold>Complete decoupling achieved!</Bold> MainViewModel has ZERO knowledge of View types.
                        Tabs are discovered automatically via <Bold>ITabViewHandler</Bold> service.
                        Add new tabs by implementing <Bold>ITabView</Bold> - no MainViewModel changes needed!
                    </TextBlock>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Tab Control - No Converters, Immediate View Resolution -->
        <TabControl x:Name="MainTabControl" 
                    Grid.Row="1" Margin="0,0,0,15"
                    ItemsSource="{Binding TabViewModels}"
                    SelectedIndex="0">
            
            <!-- Tab Header Template - Direct binding to Header property -->
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Header}" />
                </DataTemplate>
            </TabControl.ItemTemplate>
            
            <!-- Tab Content Template - Direct binding to ViewInstance property -->
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <ContentPresenter Content="{Binding ViewInstance}" />
                </DataTemplate>
            </TabControl.ContentTemplate>
            
        </TabControl>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="10" CornerRadius="3">
            <TextBlock Text="{Binding StatusMessage}" 
                       VerticalAlignment="Center"
                       FontSize="11"/>
        </Border>
    </Grid>
</Window>
